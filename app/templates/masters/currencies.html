{% extends "base.html" %}

{% block content %}
<style>
    /* Modern Card Styling */
    .card {
        border: none;
        border-radius: 16px;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        background-color: white;
    }

    .card-body {
        padding: 1.5rem;
    }

    /* Table Styling */
    .table-modern {
        margin-bottom: 0;
        border-spacing: 0 8px !important;
        border-collapse: separate !important;
        width: 100%;
    }

    .table-modern thead th {
        border: none;
        background-color: #f1f5f9;
        color: #475569;
        font-weight: 600;
        font-size: 0.875rem;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        padding: 1rem;
        white-space: nowrap;
    }

    .table-modern tbody tr {
        background: white;
        box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
        border-radius: 8px;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .table-modern tbody tr:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        background-color: #f8fafc !important;
    }

    .table-modern tbody td {
        border: none;
        padding: 1rem;
        vertical-align: middle;
        background: white;
    }

    .table-modern tbody tr td:first-child {
        border-top-left-radius: 8px;
        border-bottom-left-radius: 8px;
    }

    .table-modern tbody tr td:last-child {
        border-top-right-radius: 8px;
        border-bottom-right-radius: 8px;
    }

    /* Header Controls */
    .header-controls {
        background-color: white;
        border-radius: 12px;
        padding: 1rem 1.5rem;
        box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
        margin-bottom: 1.5rem;
    }

    .form-select,
    .form-control {
        border: 1px solid #e2e8f0;
        border-radius: 8px;
        padding: 0.5rem 0.75rem;
        font-size: 0.875rem;
        color: #1e293b;
        min-width: 120px;
    }

    .form-select:focus,
    .form-control:focus {
        border-color: #3b82f6;
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }

    /* Search Box */
    .search-box {
        min-width: 240px;
    }

    .search-box .form-control {
        padding-right: 2.5rem;
    }

    .search-box .form-control:focus+i {
        color: #3b82f6;
    }

    /* Controls Group */
    .controls-group {
        display: flex;
        align-items: center;
        gap: 1rem;
        flex-wrap: nowrap;
    }

    @media (max-width: 1200px) {
        .header-controls {
            flex-direction: column;
            gap: 1rem;
        }

        .controls-group {
            width: 100%;
            justify-content: space-between;
        }
    }

    @media (max-width: 768px) {
        .controls-group {
            flex-wrap: wrap;
        }

        .search-box {
            width: 100%;
        }
    }

    /* Pagination */
    .pagination {
        gap: 0.25rem;
    }

    .page-link {
        border: none;
        padding: 0.5rem 0.75rem;
        color: #475569;
        border-radius: 6px;
        font-size: 0.875rem;
    }

    .page-link:hover {
        background-color: #f1f5f9;
        color: #1e293b;
    }

    .page-item.active .page-link {
        background-color: #2563eb;
        color: white;
    }

    .page-item.disabled .page-link {
        background-color: #f8fafc;
        color: #94a3b8;
    }
</style>

<div class="container-fluid py-4">
    <div class="header-controls d-flex justify-content-between align-items-center flex-wrap">
        <div class="d-flex align-items-center">
            <h1 class="h4 mb-0 text-gray-800">Currencies</h1>
            <div class="ms-4 d-flex align-items-center">
                <span class="text-gray-600">Show</span>
                <select class="form-select d-inline-block w-auto mx-2" id="entriesPerPage"
                    onchange="updateEntriesPerPage(this.value)">
                    <option value="5">5</option>
                    <option value="10">10</option>
                    <option value="25">25</option>
                    <option value="50">50</option>
                </select>
                <span class="text-gray-600">Entries</span>
            </div>
            <div class="ms-4">
                <div class="search-box position-relative">
                    <input type="text" class="form-control" id="searchInput" placeholder="Search..."
                        onkeyup="searchTable(this.value)">
                    <i class="fas fa-search position-absolute top-50 end-0 translate-middle-y me-3 text-gray-400"></i>
                </div>
            </div>
        </div>
    </div>

    <div class="card">
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-modern">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Code</th>
                            <th>Name</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for currency in currencies %}
                        <tr>
                            <td>{{ loop.index }}</td>
                            <td class="fw-medium">{{ currency.code }}</td>
                            <td>{{ currency.name }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>

            <div class="d-flex justify-content-between align-items-center mt-4">
                <div class="text-gray-600">
                    Showing 1 to {{ currencies|length }} of {{ currencies|length }} entries
                </div>
                <nav aria-label="Page navigation">
                    <ul class="pagination mb-0">
                        <li class="page-item disabled">
                            <a class="page-link" href="#" tabindex="-1" aria-disabled="true">Previous</a>
                        </li>
                        <li class="page-item active"><a class="page-link" href="#">1</a></li>
                        <li class="page-item"><a class="page-link" href="#">2</a></li>
                        <li class="page-item"><a class="page-link" href="#">3</a></li>
                        <li class="page-item">
                            <a class="page-link" href="#">Next</a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    // Function to update entries per page
    function updateEntriesPerPage(value) {
        const currentUrl = new URL(window.location.href);
        currentUrl.searchParams.set('per_page', value);
        window.location.href = currentUrl.toString();
    }

    // Function to handle search
    let searchTimeout;
    function searchTable(query) {
        clearTimeout(searchTimeout);
        searchTimeout = setTimeout(() => {
            const currentUrl = new URL(window.location.href);
            if (query) {
                currentUrl.searchParams.set('search', query);
            } else {
                currentUrl.searchParams.delete('search');
            }
            window.location.href = currentUrl.toString();
        }, 500);
    }

    // Initialize filters from URL params
    document.addEventListener('DOMContentLoaded', function () {
        const urlParams = new URLSearchParams(window.location.search);

        // Set search input
        const search = urlParams.get('search');
        if (search) {
            document.getElementById('searchInput').value = search;
        }

        // Set entries per page
        const perPage = urlParams.get('per_page');
        if (perPage) {
            document.getElementById('entriesPerPage').value = perPage;
        }
    });
</script>
{% endblock %}